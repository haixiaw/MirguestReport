
\begin{frame}
    \frametitle{A new Service}
    \begin{itemize}
        \item In sniper, a Service derives from {\tt SvcBase} and 
                the interface of the service.
        \item Create the interface first. 
        \item Service interface will be used by other packages, so make the 
                header file public.
        \item Workflow:
        \begin{enumerate}
            \item create the service interface.
            \item create the implementation of the service.
            \item use "{\tt dynamic\_cast<IMySvc>(service(svc\_name))}"
                  to load the specific service in an algorithm.
        \end{enumerate}
    \end{itemize}
\end{frame}

% create interface
\newsavebox{\createinterface}
\begin{lrbox}{\createinterface}
\begin{lstlisting}[language=bash]
$ # first, cd to our project
$ cd $DYB2Area/tutorial/HelloAlg
$ mkdir Hello 
$ # edit Hello/IMySvc.hh
\end{lstlisting}
\end{lrbox}

% header of interface.
\newsavebox{\createinterfaceheader}
\begin{lrbox}{\createinterfaceheader}
\begin{lstlisting}
#ifndef IMySvc_hh
#define IMySvc_hh
class IMySvc {
public:
    virtual std::string what()=0;
    virtual ~IMySvc(){};
};
#endif
\end{lstlisting}
\end{lrbox}

\begin{frame}
    \frametitle{Create an interface}
    \par\usebox{\createinterface}
    \begin{block}{The interface in \(Hello/IMySvc.hh\)}
    \par\usebox{\createinterfaceheader}
    \end{block}
\end{frame}
